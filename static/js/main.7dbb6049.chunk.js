(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(33),i=a.n(n);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(6),c=a(7),l=a(9),m=a(8),p=a(10),u=a(68),h=a(24),d=a(27),b=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).call(this,e))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("h1",null,this.props.token)}}]),t}(r.Component),f=a(18),g=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("button",{className:this.props.className,onClick:this.props.onClick},this.props.text)}}]),t}(r.Component),v=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=[];if(this.props.label){var t=s.a.createElement("labe",{className:this.props.labelClass},this.props.label);e.push(t)}var a=s.a.createElement("input",{key:this.props.uniqueKey,type:this.props.type,name:this.props.name,id:this.props.id,className:this.props.className,placeholder:this.props.placeholder});return e.push(a),e}}]),t}(r.Component),E=a(19),y=a.n(E),w=a(54),O=a.n(w),j=a(69),N=a(34),k=a.n(N),C=function(){function e(){Object(o.a)(this,e),this.url=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,this.clientId=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_CLIENT_ID,this.clientSecret=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_CLIENT_SECRET}return Object(c.a)(e,[{key:"isAuthenticated",value:function(e){return!!e.location.state.token}},{key:"requestToken",value:function(){var e=Object(j.a)(O.a.mark(function e(t,a){var r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={grant_type:"password",client_id:this.clientId,client_secret:this.clientSecret,username:t,password:a},e.next=3,k.a.post(this.url+"/o/token/",r).then(function(e){return e}).catch(function(e){return{status:e.response.status,data:e.response.data}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),_=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){y()("#message").animate({opacity:0},2500)}},{key:"render",value:function(){return s.a.createElement("div",{id:"message",className:"message message--".concat(this.props.type)},s.a.createElement("strong",null,this.props.message))}}]),t}(r.Component);a(66).config();var M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:"",errorLogin:!1},a.errorMessage=a.errorMessage.bind(Object(f.a)(a)),a.signIn=a.signIn.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.location.state&&this.setState({email:this.props.location.state.email,password:this.props.location.state.password,errorLogin:this.props.location.state.errorLogin}),this.props.history.replace()}},{key:"signIn",value:function(){var e=this,t=new C,a=y()("#email").val(),r=y()("#password").val();t.requestToken(a,r).then(function(t){var a=!1;void 0!==t.data.error&&(a=!0),e.props.history.replace("/home",{email:e.state.email,password:e.state.password,token:t.data.access_token,refreshToken:t.data.refresh_token,errorLogin:a})})}},{key:"errorMessage",value:function(){return s.a.createElement(_,{message:"Email ou senha incorretos, tente novamente",type:"error"})}},{key:"render",value:function(){var e;this.state.errorLogin&&(e=this.errorMessage());var t=s.a.createElement("h2",{className:"title"},"Login"),a=s.a.createElement("div",{className:"item"},s.a.createElement(v,{uniqueKey:"email",type:"text",name:"email",id:"email",className:"input",placeholder:"Email..."})),r=s.a.createElement("div",{className:"item"},s.a.createElement(v,{uniqueKey:"password",type:"password",name:"password",id:"password",className:"input",placeholder:"Senha..."})),n=s.a.createElement("div",{className:"item subgrid"},s.a.createElement(g,{className:"subgrid--item btn btn--success",text:"Entrar",onClick:this.signIn}),s.a.createElement(d.b,{className:"subgrid--item btn btn--primary",to:"/register"},"Cadastrar"));return s.a.createElement("div",{className:"login-container-grid"},e,s.a.createElement("div",{className:"panel grid-container"},t,a,r,n))}}]),t}(r.Component),I=a(71),L=a.n(I),P=a(74),R=a.n(P);a(147);a(66).config();var D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={name:"",password:"",passwordConfirm:"",email:"",birth:new Date,errorMessage:"",errorRegister:"",url:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL},a.getData=a.getData.bind(Object(f.a)(a)),a.register=a.register.bind(Object(f.a)(a)),a.errorMessage=a.errorMessage.bind(Object(f.a)(a)),a.changeBirth=a.changeBirth.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.location.state&&this.setState({email:this.props.location.state.email,name:this.props.location.state.name,password:this.props.location.state.password,confirmPassword:this.props.location.state.confirmPassword,birth:this.props.location.state.props,errorMessage:this.props.location.state.errorMessage,errorRegister:!1}),this.props.history.replace()}},{key:"changeBirth",value:function(e){this.setState({birth:e})}},{key:"getData",value:function(){var e=this;this.setState({name:y()("#name").val(),password:y()("#password").val(),confirmPassword:y()("#passwordConfirm").val(),email:y()("#email").val(),errorMessage:"",errorRegister:!1},function(){return e.register()})}},{key:"register",value:function(){var e=this;if(this.state.password===this.state.confirmPassword){var t={name:this.state.name,date_of_birth:R()(this.state.birth).format("YYYY-MM-DD"),email:this.state.email,password:this.state.password};k.a.post(this.state.url+"/user/create",t).then(function(t){(new C).requestToken(t.data.email,e.state.password).then(function(t){e.props.history.replace("/home",{email:e.state.email,password:e.state.password,token:t.data.access_token,refreshToken:t.data.refresh_token})})}).catch(function(t){e.setState({errorRegister:!0,errorMessage:t.response.data.email[0]})})}else this.setState({errorRegister:!0,errorMessage:"As senhas precisam ser iguais"})}},{key:"errorMessage",value:function(){return s.a.createElement(_,{message:this.state.errorMessage,type:"error"})}},{key:"render",value:function(){var e;this.state.errorRegister&&(e=this.errorMessage());var t=s.a.createElement("div",{className:"item"},s.a.createElement("h2",{className:"title"},"Cadastre-se")),a=s.a.createElement("div",{className:"item"},s.a.createElement(v,{uniqueKey:"name",type:"text",name:"name",id:"name",className:"input",placeholder:"Informe seu nome..."})),r=s.a.createElement("div",{className:"item"},s.a.createElement(v,{uniqueKey:"password",type:"password",name:"password",id:"password",className:"input",placeholder:"Informe sua senha..."})),n=s.a.createElement("div",{className:"item"},s.a.createElement(v,{uniqueKey:"passwordConfirm",type:"password",name:"passwordConfirm",id:"passwordConfirm",className:"input",placeholder:"Confirme sua senha..."})),i=s.a.createElement("div",{className:"item"},s.a.createElement(v,{uniqueKey:"email",type:"text",name:"email",id:"email",className:"input",placeholder:"Informe seu email..."})),o=s.a.createElement("div",{className:"item"},s.a.createElement(L.a,{onChange:this.changeBirth,selected:this.state.birth,dateFormat:"dd/MM/yyyy",name:"birth",id:"birth",className:"input",placeholder:"Informe sua data de nascimento..."})),c=s.a.createElement(g,{className:"item btn btn--success",text:"Cadastrar",onClick:this.getData}),l=s.a.createElement(d.b,{className:"item btn btn--primary",to:"/login"},"Voltar");return s.a.createElement("div",{className:"register-container-grid"},e,s.a.createElement("div",{className:"panel grid-container"},t,a,r,n,i,o,c,l))}}]),t}(r.Component);function x(e){var t=e.component,a=Object(u.a)(e,["component"]);return(new C).isAuthenticated(a)?s.a.createElement(t,a):s.a.createElement(h.a,{to:{pathname:"/login",state:a.location.state}})}var A=function(){return s.a.createElement(d.a,null,s.a.createElement(h.d,null,s.a.createElement(h.b,{path:"/login",exact:!0,component:M}),s.a.createElement(h.b,{path:"/register",exact:!0,component:D}),s.a.createElement(x,{path:"/home",exact:!0,component:b})))},T=(a(148),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"box"}),s.a.createElement(A,null))}}]),t}(r.Component));i.a.render(s.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},75:function(e,t,a){e.exports=a(149)}},[[75,1,2]]]);
//# sourceMappingURL=main.7dbb6049.chunk.js.map